<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MÃ¼zik Akademisi - KapsamlÄ± EÄŸitim</title>
  <style>
    /* --- CSS Reset & Variables --- */
    :root {
      --bg-color: #0f0f13;
      --surface-color: #1a1a24;
      --surface-hover: #262635;
      --primary-color: #d8b4fe;
      --secondary-color: #5eead4;
      --accent-color: #f43f5e;
      --text-primary: #f8fafc;
      --text-muted: #94a3b8;
      --font-main: 'Segoe UI', system-ui, sans-serif;
      --card-radius: 12px;
      --transition-speed: 0.25s;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-primary);
      font-family: var(--font-main);
      line-height: 1.7;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-color);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--surface-hover);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }

    /* --- Layout --- */
    #app {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      width: 100%;
      flex: 1;
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    #app.visible {
      display: grid;
      grid-template-columns: 3fr 1fr;
      gap: 2rem;
      opacity: 1;
    }

    header {
      grid-column: 1 / -1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding-bottom: 1rem;
    }

    h1 {
      color: var(--primary-color);
      font-size: 2rem;
      font-weight: 700;
    }

    .user-panel {
      text-align: right;
    }

    .user-info {
      font-size: 0.9rem;
      color: var(--secondary-color);
      margin-bottom: 0.2rem;
    }

    .logout-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: var(--text-muted);
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    .logout-btn:hover {
      background: var(--accent-color);
      color: #fff;
    }

    /* --- Main Content Area --- */
    .main-col {
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }

    /* --- Sidebar --- */
    .sidebar-col {
      background: var(--surface-color);
      border-radius: var(--card-radius);
      padding: 1.5rem;
      height: fit-content;
      position: sticky;
      top: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .sidebar-title {
      color: var(--secondary-color);
      font-size: 1.2rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 0.5rem;
    }

    .song-list {
      list-style: none;
    }

    .song-item {
      margin-bottom: 1rem;
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    .song-item strong {
      color: var(--text-primary);
      display: block;
    }

    /* --- Dashboard Grid --- */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .dash-card {
      background: var(--surface-color);
      border-radius: var(--card-radius);
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .dash-card h3 {
      color: var(--secondary-color);
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .ai-lesson-box {
      background: rgba(94, 234, 212, 0.05);
      padding: 1rem;
      border-radius: 8px;
      border-left: 3px solid var(--secondary-color);
      margin-bottom: 1rem;
    }

    .refresh-btn {
      background: var(--secondary-color);
      border: none;
      color: #000;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.85rem;
      width: 100%;
    }

    .refresh-btn:hover {
      opacity: 0.9;
    }

    /* --- Generic Section Styles --- */
    .section-title {
      font-size: 1.8rem;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      padding-left: 0.8rem;
      border-left: 5px solid var(--primary-color);
    }

    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .content-card {
      background: var(--surface-color);
      padding: 1.5rem;
      border-radius: var(--card-radius);
      cursor: pointer;
      transition: all var(--transition-speed);
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.02);
    }

    .content-card:hover {
      transform: translateY(-4px);
      background: var(--surface-hover);
      border-color: var(--primary-color);
    }

    .card-head {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .card-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .sub-menu {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.4s ease;
    }

    .content-card.active .sub-menu {
      max-height: 1000px;
      opacity: 1;
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sub-btn {
      display: block;
      width: 100%;
      padding: 10px 14px;
      margin-bottom: 6px;
      background: rgba(255, 255, 255, 0.03);
      border: none;
      color: var(--text-muted);
      text-align: left;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
      font-size: 0.95rem;
    }

    .sub-btn:hover {
      background: var(--primary-color);
      color: #000;
      font-weight: 600;
      padding-left: 18px;
    }

    /* --- Detail Modal --- */
    .detail-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 200;
      padding: 2rem;
      overflow-y: auto;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .detail-overlay.open {
      display: block;
      opacity: 1;
    }

    .detail-content {
      max-width: 900px;
      margin: 0 auto;
      background: var(--surface-color);
      padding: 3rem;
      border-radius: 16px;
      position: relative;
      box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
    }

    .close-detail {
      position: absolute;
      top: 2rem;
      right: 2rem;
      background: transparent;
      border: 2px solid var(--accent-color);
      color: var(--accent-color);
      padding: 0.5rem 1.2rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    .close-detail:hover {
      background: var(--accent-color);
      color: white;
    }

    .article h2 {
      color: var(--primary-color);
      font-size: 2.2rem;
      margin-bottom: 1.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 1rem;
    }

    .article h3 {
      color: var(--secondary-color);
      font-size: 1.5rem;
      margin: 2rem 0 1rem;
    }

    .article p {
      margin-bottom: 1.2rem;
      font-size: 1.1rem;
      color: #cbd5e1;
      text-align: justify;
    }

    .article ul {
      margin-left: 1.5rem;
      margin-bottom: 1.5rem;
      color: #cbd5e1;
    }

    .article li {
      margin-bottom: 0.8rem;
      font-size: 1.05rem;
    }

    .article strong {
      color: var(--text-primary);
    }

    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      background: #000;
      margin: 2.5rem 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* --- Onboarding --- */
    .onboarding {
      position: fixed;
      inset: 0;
      background: #0f0f13;
      z-index: 500;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .onboard-card {
      background: var(--surface-color);
      padding: 3rem;
      border-radius: 16px;
      width: 100%;
      max-width: 450px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.8rem;
      font-size: 1rem;
      color: var(--text-muted);
    }

    input,
    select {
      width: 100%;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: white;
      font-size: 1.1rem;
      outline: none;
      transition: border 0.3s;
    }

    input:focus,
    select:focus {
      border-color: var(--primary-color);
    }

    .btn-start {
      width: 100%;
      padding: 1.2rem;
      background: var(--primary-color);
      border: none;
      color: #000;
      font-weight: 800;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.2rem;
      margin-top: 1rem;
      transition: transform 0.2s;
    }

    .btn-start:hover {
      transform: scale(1.02);
      background: #e9d5ff;
    }

    /* --- Footer Label --- */
    .producer-label {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.6);
      padding: 5px 10px;
      border-radius: 4px;
      color: var(--text-muted);
      font-size: 0.75rem;
      pointer-events: none;
      z-index: 1000;
      opacity: 0.7;
    }

    /* --- Ad Placeholder --- */
    .ad-placeholder {
      background: rgba(255, 255, 255, 0.02);
      border: 1px dashed var(--text-muted);
      border-radius: 8px;
      padding: 2rem;
      margin-top: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      text-align: center;
      min-height: 150px;
    }

    /* --- Responsive Tables --- */
    .weekly-scroll-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin-top: 0.5rem;
      padding-bottom: 0.5rem;
    }

    .weekly-plan-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(100px, 1fr));
      gap: 5px;
      text-align: center;
      min-width: 600px;
      /* Force minimum width to trigger scroll */
    }

    @media (max-width: 768px) {
      .weekly-plan-grid {
        min-width: 700px;
      }

      /* Ensure readable on small screens */
    }

    @media (max-width: 1024px) {
      #app.visible {
        grid-template-columns: 1fr;
      }

      .sidebar-col {
        position: relative;
        top: 0;
        order: 3;
      }

      .detail-content {
        padding: 2rem;
        margin: 1rem;
      }
    }
  </style>
</head>

<body>

  <!-- Producer Label -->
  <div class="producer-label">YapÄ±mcÄ±: Mehflexx17</div>

  <!-- Onboarding -->
  <div id="onboarding-overlay" class="onboarding">
    <div class="onboard-card">
      <h2 style="color:var(--primary-color); margin-bottom:0.5rem; text-align:center;">MÃ¼zik Akademisi</h2>
      <p style="text-align:center; color:var(--text-muted); margin-bottom:2rem;">KiÅŸiselleÅŸtirilmiÅŸ eÄŸitim yolculuÄŸuna
        baÅŸla.</p>

      <div class="form-group">
        <label>KullanÄ±cÄ± AdÄ±</label>
        <input type="text" id="inp-name" placeholder="AdÄ±nÄ±z...">
      </div>
      <div class="form-group">
        <label>Seviye</label>
        <select id="inp-level">
          <option value="BaÅŸlangÄ±Ã§">BaÅŸlangÄ±Ã§</option>
          <option value="Orta">Orta</option>
          <option value="Profesyonel">Profesyonel</option>
        </select>
      </div>
      <div class="form-group">
        <label>EnstrÃ¼man</label>
        <select id="inp-inst">
          <option value="Gitar">Gitar</option>
          <option value="Elektro Gitar">Elektro Gitar</option>
          <option value="Bas Gitar">Bas Gitar</option>
          <option value="Piyano">Piyano</option>
          <option value="Bateri">Bateri</option>
        </select>
      </div>
      <button class="btn-start" onclick="saveUser()">BaÅŸla</button>
    </div>
  </div>

  <!-- Main App -->
  <div id="app">
    <header>
      <h1>MÃ¼zik Akademisi</h1>
      <div class="user-panel">
        <div class="user-info" id="user-display"></div>
        <button class="logout-btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap / SÄ±fÄ±rla</button>
      </div>
    </header>

    <!-- Center Column -->
    <div class="main-col">

      <!-- Dashboard -->
      <div class="dashboard-grid">
        <div class="dash-card">
          <h3>âš¡ GÃ¼nlÃ¼k AI Dersi</h3>
          <div id="ai-lesson-box" class="ai-lesson-box">
            <!-- Dynamic Content -->
          </div>
          <button class="refresh-btn" onclick="generateLesson()">Dersi Atla âŸ³</button>
        </div>

        <div class="dash-card">
          <h3>ğŸ“… HaftalÄ±k Program</h3>
          <div id="weekly-plan" style="font-size:0.9rem; color:var(--text-muted);">
            <!-- Dynamic Content -->
          </div>
        </div>
      </div>

      <!-- Genres Section -->
      <div>
        <h2 class="section-title">MÃ¼zik TÃ¼rleri</h2>
        <div class="cards-container" id="genres-container"></div>
      </div>

      <!-- Instruments Section -->
      <div>
        <h2 class="section-title">EnstrÃ¼manlar</h2>
        <div class="cards-container" id="instruments-container"></div>
      </div>

      <!-- Classical Section -->
      <div>
        <h2 class="section-title">Klasik MÃ¼zik DehalarÄ±</h2>
        <div class="cards-container" id="classical-container"></div>
      </div>

    </div>

    <!-- Sidebar Column -->
    <aside class="sidebar-col">
      <h3 class="sidebar-title">Ã–nerilen ÅarkÄ±lar</h3>
      <ul class="song-list">
        <li class="song-item"><strong>Metallica</strong> Master of Puppets</li>
        <li class="song-item"><strong>Nirvana</strong> Smells Like Teen Spirit</li>
        <li class="song-item"><strong>Tame Impala</strong> The Less I Know The Better</li>
        <li class="song-item"><strong>Korn</strong> Freak on a Leash</li>
        <li class="song-item"><strong>Chopin</strong> Nocturne Op.9 No.2</li>
        <li class="song-item"><strong>Beethoven</strong> Moonlight Sonata</li>
      </ul>

      <!-- Ad Placeholder -->
      <div class="ad-placeholder">
        <div>
          <strong>Reklam AlanÄ±</strong><br>
          <span>Sponsor olmak iÃ§in iletiÅŸime geÃ§in.</span>
        </div>
      </div>
    </aside>

  </div>

  <!-- Full Screen Modal -->
  <div id="detail-modal" class="detail-overlay">
    <div class="detail-content">
      <button class="close-detail" onclick="closeDetail()">Kapat âœ•</button>
      <div id="detail-body" class="article"></div>
    </div>
  </div>

  <script>
    // --- User System: 30 Days Expiry ---
    const STORAGE_KEY = 'musicAppUser_v2';
    const EXPIRY_MS = 30 * 24 * 60 * 60 * 1000;

    // --- Content Database ---
    const DB = {
      genres: [
        {
          id: 'metal', title: 'Metal MÃ¼ziÄŸi', desc: 'Distortion, hÄ±z ve teknik detaylar.',
          subs: [
            {
              id: 'history', name: 'Metal Tarihi ve Ton YapÄ±sÄ±', content: `
                        <h2>Metal Tarihi ve Ton YapÄ±sÄ±</h2>
                        <p>Metal mÃ¼zik, 1960'larÄ±n sonunda ve 1970'lerin baÅŸÄ±nda hard rock'Ä±n kÃ¶klerinden evrilerek ortaya Ã§Ä±kmÄ±ÅŸtÄ±r. Black Sabbath, Led Zeppelin ve Deep Purple gibi gruplar bu tÃ¼rÃ¼n Ã¶ncÃ¼leri sayÄ±lÄ±r. Temelinde agresiflik, yÃ¼ksek ses ve teknik beceri yatar.</p>
                        <h3>Ton YapÄ±sÄ± ve Distortion</h3>
                        <p>Metal mÃ¼ziÄŸin en ayÄ±rt edici Ã¶zelliÄŸi "Distortion" (Bozulma) efektidir. Gitar sinyali, amfi veya pedallar aracÄ±lÄ±ÄŸÄ±yla o kadar gÃ¼Ã§lendirilir ki dalga formu kareleÅŸir (clipping). Bu, sese harmonik zenginlik ve sustain (uzama) katar.</p>
                        <ul>
                            <li><strong>High Gain Amfiler:</strong> Mesa Boogie, Marshall JCM800 gibi amfiler metal tonunun temelidir.</li>
                            <li><strong>Scooped Mids:</strong> Modern metalde orta frekanslar (Mids) kÄ±sÄ±larak bas ve tizlerin artÄ±rÄ±lmasÄ± yaygÄ±ndÄ±r (V-Equalizer ayarÄ±).</li>
                        </ul>
                        <h3>Ritim MantÄ±ÄŸÄ±</h3>
                        <p>Metal ritimleri genellikle 4/4'lÃ¼k Ã¶lÃ§Ã¼dedir ancak vuruÅŸlar (accent) Ã§ok serttir. Gitar ve davulun (Ã¶zellikle Kick davulunun) senkronize olmasÄ± kuraldÄ±r. Buna "Locking in" denir.</p>
                    `},
            {
              id: 'thrash', name: 'Thrash Metal', content: `
                        <h2>Thrash Metal</h2>
                        <p>HÄ±z ve agresifliÄŸin zirvesi. NWOBHM (New Wave of British Heavy Metal) ve Hardcore Punk'Ä±n karÄ±ÅŸÄ±mÄ±dÄ±r. "Big Four" olarak bilinen Metallica, Slayer, Megadeth ve Anthrax bu tÃ¼rÃ¼ tanÄ±mlamÄ±ÅŸtÄ±r.</p>
                        <h3>Teknik Ã–zellikler</h3>
                        <ul>
                            <li><strong>HÄ±zlÄ± Tempolar:</strong> Genellikle 180 BPM Ã¼zerindedir.</li>
                            <li><strong>Palm Mute (AvuÃ§ Ä°Ã§i Susturma):</strong> SaÄŸ elin avuÃ§ iÃ§i gitar kÃ¶prÃ¼sÃ¼ne yaslanarak teller susturulur. Bu, o karakteristik "chug-chug" sesini yaratÄ±r.</li>
                            <li><strong>Downpicking:</strong> Sadece aÅŸaÄŸÄ± vuruÅŸ yaparak daha agresif ve net bir ton elde edilir (Ã–rn: James Hetfield tekniÄŸi).</li>
                        </ul>
                        <h3>Ã–rnek ÅarkÄ± Analizi: Master of Puppets</h3>
                        <p>Metallica'nÄ±n bu baÅŸyapÄ±tÄ±, sÃ¼rekli deÄŸiÅŸen kromatik riff'ler ve senkoplu (aksak) ritimler iÃ§erir. E telindeki hÄ±zlÄ± downpicking ve aralardaki power chord vuruÅŸlarÄ± Thrash metalin ders kitabÄ±dÄ±r.</p>
                    `},
            {
              id: 'death', name: 'Death Metal', content: `
                        <h2>Death Metal</h2>
                        <p>Thrash Metal'den tÃ¼reyen, ancak daha karanlÄ±k, daha aÄŸÄ±r ve teknik olarak daha karmaÅŸÄ±k bir tÃ¼rdÃ¼r. Vokaller melodik olmaktan ziyade ritmik ve hÄ±rÄ±ltÄ±lÄ±dÄ±r.</p>
                        <h3>Karakteristikler</h3>
                        <ul>
                            <li><strong>Growl Vokal (BÃ¶ÄŸÃ¼rtÃ¼):</strong> Ses tellerini kullanmadan gÄ±rtlaktan ve diyaframdan gelen brutal vokal tekniÄŸi.</li>
                            <li><strong>Downtuning:</strong> Gitarlar standart E yerine D, C veya B'ye akort edilir. Bu, tonu aÄŸÄ±rlaÅŸtÄ±rÄ±r.</li>
                            <li><strong>Blast Beat:</strong> Davulda trampet ve kick'in inanÄ±lmaz hÄ±zda ardÄ±ÅŸÄ±k Ã§alÄ±nmasÄ±dÄ±r.</li>
                        </ul>
                        <p>Referans Gruplar: Death, Cannibal Corpse, Morbid Angel.</p>
                    `},
            {
              id: 'doom', name: 'Doom Metal', content: `
                        <h2>Doom Metal</h2>
                        <p>Black Sabbath'Ä±n mirasÄ±nÄ± devralan, yavaÅŸ tempolu (bazen 60 BPM altÄ±) ve melankolik atmosferli bir tÃ¼rdÃ¼r. HÄ±zdan ziyade aÄŸÄ±rlÄ±ÄŸa (Heaviness) Ã¶nem verilir.</p>
                        <p>Gitarlar genellikle Ã§ok fazla Fuzz efektine sahiptir ve sustain (nota uzamasÄ±) Ã§ok Ã¶nemlidir.</p>
                    `}
          ]
        },
        {
          id: 'rock', title: 'Rock MÃ¼zik', desc: 'Klasik, Alternatif ve Modern tÄ±nÄ±lar.',
          subs: [
            {
              id: 'classic_rock', name: 'Klasik Rock', content: `
                        <h2>Klasik Rock (Classic Rock)</h2>
                        <p>1960'lardan 80'lerin sonuna kadar uzanan, Blues temelli rock mÃ¼zik dÃ¶nemini kapsar. Temel yapÄ±sÄ± Verse-Chorus-Verse (KÄ±ta-Nakarat-KÄ±ta) formundadÄ±r.</p>
                        <h3>Ses KarakteristiÄŸi</h3>
                        <ul>
                            <li><strong>Overdrive:</strong> Distortion'dan daha hafif, lambalÄ± amfinin doÄŸal kÄ±rÄ±lmasÄ± (breakup) ile oluÅŸan ton.</li>
                            <li><strong>Pentatonik Gam:</strong> SololarÄ±n %90'Ä± Pentatonik minÃ¶r veya majÃ¶r gam Ã¼zerine kuruludur.</li>
                        </ul>
                        <h3>Ã–rnek: Smells Like Teen Spirit â€“ Nirvana</h3>
                        <p>AslÄ±nda Grunge (Alternatif Rock) olsa da, klasik rock formlarÄ±nÄ± (Sessiz KÄ±ta / GÃ¼rÃ¼ltÃ¼lÃ¼ Nakarat) mÃ¼kemmel uygular. 4 akorlu basit bir dÃ¶ngÃ¼ ve ham enerjiye dayanÄ±r.</p>
                    `},
            {
              id: 'alt_rock', name: 'Alternatif Rock', content: `
                        <h2>Alternatif Rock</h2>
                        <p>Mainstream ticari rock mÃ¼ziÄŸine karÅŸÄ± bir tepki olarak 80'lerde yeraltÄ±nda doÄŸmuÅŸ, 90'larda patlamÄ±ÅŸtÄ±r. Ses yapÄ±sÄ± daha deneyseldir.</p>
                        <h3>Ã–rnek: The Less I Know The Better â€“ Tame Impala</h3>
                        <p>Burada rock enstrÃ¼manlarÄ± (Ã¶zellikle bas gitar) psikedelik efektlerle (Phaser, Chorus) harmanlanÄ±r. Riff, gitardan Ã§ok bas gitar tarafÄ±ndan yÃ¼rÃ¼tÃ¼lÃ¼r. Bu modern rock anlayÄ±ÅŸÄ±nÄ±n gÃ¼zel bir Ã¶rneÄŸidir.</p>
                    `}
          ]
        }
      ],
      instruments: [
        {
          id: 'guitar', title: 'Gitar DÃ¼nyasÄ±', desc: 'Klasik, Akustik, Elektro ve Bas.',
          subs: [
            {
              id: 'classic_g', name: 'Klasik Gitar', content: `
                        <h2>Klasik Gitar</h2>
                        <p>MÃ¼ziÄŸe baÅŸlamak iÃ§in en sÄ±k tercih edilen enstrÃ¼mandÄ±r. GÃ¶vdesi daha kÃ¼Ã§Ã¼ktÃ¼r, telleri naylondur ve klavyesi geniÅŸtir. Pena ile deÄŸil, tÄ±rnak/parmak ile (Fingerstyle) Ã§alÄ±nÄ±r.</p>
                        <div class="video-container"><iframe src="https://www.youtube.com/embed/OIv6vwylSf4" allowfullscreen></iframe></div>
                    `},
            {
              id: 'electric_g', name: 'Elektro Gitar', content: `
                        <h2>Elektro Gitar</h2>
                        <p>GÃ¶vdesi genellikle doludur (Solid body). Sesi Ã¼zerindeki manyetikler (Pickup) ile algÄ±lar ve kablo ile amfiye iletir.</p>
                        <h3>Manyetik Sistemleri</h3>
                        <ul>
                            <li><strong>Single Coil:</strong> Daha parlak, net ve camsÄ± bir ton (Fender Stratocaster).</li>
                            <li><strong>Humbucker:</strong> Ä°ki bobinli, gÃ¼rÃ¼ltÃ¼sÃ¼z, daha koyu ve gÃ¼Ã§lÃ¼ bir ton (Gibson Les Paul). Rock ve Metal iÃ§in idealdir.</li>
                        </ul>
                        <h3>Ä°leri Seviye Teknikler</h3>
                        <ul>
                            <li><strong>Sweep Picking:</strong> PenayÄ± tellerin Ã¼zerinde tek bir yÃ¶ne sÃ¼pÃ¼rerek Ã§ok hÄ±zlÄ± arpej Ã§alma.</li>
                            <li><strong>Legato:</strong> PenayÄ± az kullanarak, sadece sol el parmaklarÄ±yla (Hammer-on/Pull-off) akÄ±cÄ± Ã§alma.</li>
                        </ul>
                        <div class="video-container"><iframe src="https://www.youtube.com/embed/SljcdDZs5wI" allowfullscreen></iframe></div>
                    `},
            {
              id: 'bass_g', name: 'Bas Gitar', content: `
                        <h2>Bas Gitar</h2>
                        <p>Genellikle 4 tellidir ve gitarÄ±n bir oktav altÄ±ndan Ã§alar. Ritim (Davul) ile melodi (Gitar/Vokal) arasÄ±ndaki kÃ¶prÃ¼dÃ¼r. GruplarÄ±n duyulmayan kahramanÄ±dÄ±r.</p>
                        <h3>Ã‡alma Teknikleri</h3>
                        <ul>
                            <li><strong>Fingerstyle:</strong> Ä°ÅŸaret ve orta parmak ile tellere vurarak Ã§alma.</li>
                            <li><strong>Slap:</strong> BaÅŸparmak ile tele vurup (thump), iÅŸaret parmaÄŸÄ± ile teli Ã§ekme (pop) tekniÄŸi. Funk mÃ¼ziÄŸin temelidir.</li>
                        </ul>
                    `}
          ]
        },
        {
          id: 'piano', title: 'Piyano', desc: 'Mekanik, teori ve armoni.',
          subs: [
            {
              id: 'mech', name: 'Piyano MekanizmasÄ± ve Pedallar', content: `
                        <h2>Piyano MekanizmasÄ±</h2>
                        <p>Piyano, tuÅŸlara basÄ±ldÄ±ÄŸÄ±nda iÃ§erideki keÃ§eli Ã§ekiÃ§lerin tellere vurmasÄ±yla ses Ã§Ä±karan vurmalÄ±-telli bir Ã§algÄ±dÄ±r.</p>
                        <h3>Pedallar</h3>
                        <ul>
                            <li><strong>SaÄŸ Pedal (Sustain/Damper):</strong> En Ã§ok kullanÄ±landÄ±r. BasÄ±ldÄ±ÄŸÄ±nda tellerin Ã¼zerindeki susturucular kalkar ve ses uzar.</li>
                            <li><strong>Sol Pedal (Soft/Una Corda):</strong> Ã‡ekiÃ§ler yana kayar ve daha az tele vurur, ses yumuÅŸar ve kÄ±sÄ±lÄ±r.</li>
                            <li><strong>Orta Pedal (Sostenuto):</strong> Sadece basÄ±lÄ± tutulan notalarÄ±n uzamasÄ±nÄ± saÄŸlar, diÄŸerleri susturulur.</li>
                        </ul>
                    `},
            {
              id: 'theory', name: 'Teori ve Egzersizler', content: `
                        <h2>Temel Teori ve Egzersizler</h2>
                        <p>Piyanoda geliÅŸim, el baÄŸÄ±msÄ±zlÄ±ÄŸÄ± (Hand independence) ile baÅŸlar.</p>
                        <ul>
                            <li><strong>Hanon Egzersizleri:</strong> ParmaklarÄ± gÃ¼Ã§lendirmek ve eÅŸitlemek iÃ§in yapÄ±lan tekrarlÄ± kalÄ±plar.</li>
                            <li><strong>Akor Kurulumu:</strong> 1-3-5 formÃ¼lÃ¼. Do MajÃ¶r gamÄ± Ã¼zerindeki 1. (Do), 3. (Mi) ve 5. (Sol) sesler Do MajÃ¶r akorunu oluÅŸturur.</li>
                        </ul>
                    `}
          ]
        },
        {
          id: 'drums', title: 'Bateri', desc: 'Ritim, koordinasyon ve dinamikler.',
          subs: [
            {
              id: 'anatomy', name: 'Davul Anatomisi', content: `
                        <h2>Davul Seti (Drum Kit)</h2>
                        <p>Modern bir davul seti ÅŸu parÃ§alardan oluÅŸur:</p>
                        <ul>
                            <li><strong>Kick (Bas Davul):</strong> En kalÄ±n ses, saÄŸ ayak ile pedalla Ã§alÄ±nÄ±r. Ritmin kalbidir (1. ve 3. vuruÅŸlar).</li>
                            <li><strong>Snare (Trampet):</strong> Derisinin altÄ±ndaki metal teller (kort) sayesinde cÄ±zÄ±rtÄ±lÄ±, keskin bir ses verir. Ritmin bel kemiÄŸidir (2. ve 4. vuruÅŸlar).</li>
                            <li><strong>Hi-Hat:</strong> Ãœst Ã¼ste duran iki zil. Sol ayak ile aÃ§Ä±lÄ±p kapatÄ±lÄ±r. ZamanÄ± tutmak iÃ§in kullanÄ±lÄ±r.</li>
                            <li><strong>Toms:</strong> Genellikle ataklarda (fill) kullanÄ±lan, farklÄ± tonlara sahip davullar.</li>
                            <li><strong>Cymbals (Ziller):</strong> Crash (vurgu) ve Ride (ritim yÃ¼rÃ¼yÃ¼ÅŸÃ¼) zilleri.</li>
                        </ul>
                    `},
            {
              id: 'tech', name: 'Teknikler ve Egzersizler', content: `
                        <h2>Teknikler ve Egzersizler</h2>
                        <p>Davulculuk, 4 uzvun birbirinden baÄŸÄ±msÄ±z hareket edebilmesine dayanÄ±r.</p>
                        <ul>
                            <li><strong>Single Stroke Roll:</strong> R-L-R-L (SaÄŸ-Sol) vuruÅŸlarÄ±.</li>
                            <li><strong>Double Stroke Roll:</strong> RR-LL vuruÅŸlarÄ±.</li>
                            <li><strong>Ghost Notes:</strong> Trampete Ã§ok hafif dokunuÅŸlarla yapÄ±lan, ritme "groove" (akÄ±cÄ±lÄ±k) katan duyulur duyulmaz vuruÅŸlar.</li>
                            <li><strong>4/4 Rock Beat:</strong> 
                                <br>- Hi-hat: 1-2-3-4 (8'lik notalarla "1 ve 2 ve...")
                                <br>- Kick: 1 ve 3'te.
                                <br>- Snare: 2 ve 4'te.
                            </li>
                        </ul>
                    `}
          ]
        }
      ],
      classical: [
        {
          id: 'composers', title: 'BÃ¼yÃ¼k Besteciler', desc: 'Mozart, Beethoven, Chopin.',
          subs: [
            {
              id: 'mozart', name: 'Wolfgang Amadeus Mozart', content: `
                        <h2>Mozart</h2>
                        <p>Klasik dÃ¶nemin dahi Ã§ocuÄŸu. Besteleri berraklÄ±k, denge ve ÅŸeffaflÄ±k ile tanÄ±nÄ±r. 600'den fazla eser bÄ±rakmÄ±ÅŸtÄ±r.</p>
                    `},
            {
              id: 'beethoven', name: 'Ludwig van Beethoven', content: `
                        <h2>Beethoven</h2>
                        <p>Romantik dÃ¶nemin kapÄ±sÄ±nÄ± aralayan dev. SaÄŸÄ±r olmasÄ±na raÄŸmen 9. Senfoni gibi baÅŸyapÄ±tlar bestelemiÅŸtir. Eserleri yoÄŸun duygu ve drama iÃ§erir (Ã–rn: Moonlight Sonata).</p>
                    `},
            {
              id: 'chopin', name: 'FrÃ©dÃ©ric Chopin', content: `
                        <h2>Chopin</h2>
                        <p>"Piyanonun Åairi". Eserlerinin neredeyse tamamÄ± piyano iÃ§indir. NoktÃ¼rnleri ve BaladlarÄ±, piyano tekniÄŸinin ve duygusal derinliÄŸin zirvesidir (Ã–rn: Nocturne Op.9 No.2).</p>
                    `}
          ]
        }
      ]
    };

    // --- State & Logic ---
    let currentUser = null;

    window.addEventListener('load', () => {
      loadUser();
    });

    function loadUser() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (raw) {
        const data = JSON.parse(raw);
        if ((Date.now() - data.savedAt) < EXPIRY_MS) {
          currentUser = data;
          initApp();
          return;
        }
      }
      document.getElementById('onboarding-overlay').style.display = 'flex';
    }

    function saveUser() {
      const name = document.getElementById('inp-name').value.trim();
      const level = document.getElementById('inp-level').value;
      const inst = document.getElementById('inp-inst').value;

      if (!name) return alert('LÃ¼tfen isim giriniz.');

      currentUser = { name, level, inst, savedAt: Date.now() };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(currentUser));
      document.getElementById('onboarding-overlay').style.display = 'none';
      initApp();
    }

    function logout() {
      if (confirm('KayÄ±tlÄ± veriler silinecek. Emin misiniz?')) {
        localStorage.removeItem(STORAGE_KEY);
        location.reload();
      }
    }

    function initApp() {
      document.getElementById('app').classList.add('visible');
      document.getElementById('user-display').textContent = `ğŸ‘¤ ${currentUser.name} | ${currentUser.inst} | ${currentUser.level}`;

      generateLesson();
      renderWeeklyPlan();

      renderSection('genres-container', DB.genres);
      renderSection('instruments-container', DB.instruments);
      renderSection('classical-container', DB.classical);
    }

    // --- AI Lesson Generator Pool ---
    const AI_POOLS = {
      'BaÅŸlangÄ±Ã§': [
        "15 dakika boyunca sadece saÄŸ el ritim (downstroke) Ã§alÄ±ÅŸmasÄ± yap.",
        "kullandÄ±ÄŸÄ±n enstrÃ¼manda BoÅŸ Teller Ã¼zerinde temiz ses Ã§Ä±karma egzersizi yap.",
        "Metronomu 60 BPM'e al ve sadece 4'lÃ¼k vuruÅŸlarla zamanlamayÄ± oturt.",
        "Basit bir akor geÃ§iÅŸi (C - G geÃ§iÅŸi) Ã¼zerinde 50 tekrar yap."
      ],
      'Orta': [
        "kendine ait 4 Ã¶lÃ§Ã¼lÃ¼k bir Metal Riff'i yazmayÄ± dene.",
        "bildiÄŸin bir gamÄ± (Ã¶rneÄŸin MinÃ¶r gam) tÃ¼m klavyede gezerek Ã§al.",
        "EÄŸer gitarcÄ±ysan Alternate Picking ile 16'lÄ±k notalar Ã§alÄ±ÅŸ (90 BPM).",
        "Davulcuysan Paradiddle egzersizini Kick Ã¼zerinde dene."
      ],
      'Profesyonel': [
        "Sweep Picking arpejlerini metronom ile 140 BPM'de temizle.",
        "BugÃ¼n hÄ±z gÃ¼nÃ¼! dayanÄ±klÄ±lÄ±k iÃ§in 3 dakika kesintisiz Tremolo Picking yap.",
        "KarmaÅŸÄ±k bir arpeji (Diminished 7th) farklÄ± pozisyonlarda uygula.",
        "Ghost note dinamiklerine odaklanarak bir Funk groove Ã§al."
      ]
    };

    function generateLesson() {
      const level = currentUser.level;
      const pool = AI_POOLS[level];
      const randomTip = pool[Math.floor(Math.random() * pool.length)];

      const box = document.getElementById('ai-lesson-box');
      box.innerHTML = `
            <strong>BugÃ¼nÃ¼n Hedefi (${level})</strong>
            <p style="margin-top:0.5rem; color:#cbd5e1;">${currentUser.inst} iÃ§in: ${randomTip}</p>
        `;
    }

    // --- Weekly Plan Logic ---
    function renderWeeklyPlan() {
      const level = currentUser.level;
      let planHtml = "";

      const plans = {
        'BaÅŸlangÄ±Ã§': ["Temel Ritim", "Akor GeÃ§iÅŸleri", "Parmak Egzersizi", "Dinlenme", "ÅarkÄ± Ã‡alÄ±ÅŸmasÄ±", "Tekrar", "Serbest"],
        'Orta': ["Ã–lÃ§Ã¼/Gam Teorisi", "Riff YazÄ±mÄ±", "HÄ±z ArtÄ±rma", "Kulak EÄŸitimi", "Teknik (Legato/Palm Mute)", "Jam Session", "Analiz"],
        'Profesyonel': ["Ä°leri Teknik (Sweep)", "Kompozisyon", "HÄ±z/DayanÄ±klÄ±lÄ±k", "Modlar", "DoÄŸaÃ§lama", "KayÄ±r/Demo", "Dinlenme"]
      };

      const days = ["Pzt", "Sal", "Ã‡ar", "Per", "Cum", "Cmt", "Paz"];
      const tasks = plans[level];

      planHtml = `<div class="weekly-scroll-container"><div class="weekly-plan-grid">`;
      days.forEach((day, i) => {
        planHtml += `
                <div style="background:rgba(255,255,255,0.05); padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.05);">
                    <div style="color:var(--primary-color); font-weight:bold; margin-bottom:4px;">${day}</div>
                    <div style="line-height:1.2;">${tasks[i]}</div>
                </div>
            `;
      });
      planHtml += `</div></div>`;

      document.getElementById('weekly-plan').innerHTML = planHtml;
    }

    // --- Renderer ---
    function renderSection(containerId, dataList) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';

      dataList.forEach(item => {
        let subsHtml = '';
        item.subs.forEach(sub => {
          subsHtml += `<button class="sub-btn" onclick="openModal('${item.id}', '${sub.id}')">â€º ${sub.name}</button>`;
        });

        const card = document.createElement('div');
        card.className = 'content-card';
        card.innerHTML = `
                <div class="card-head">${item.title}</div>
                <div class="card-sub">${item.desc}</div>
                <div class="sub-menu">${subsHtml}</div>
            `;

        card.onclick = (e) => {
          if (e.target.tagName === 'BUTTON') return;
          const isActive = card.classList.contains('active');
          document.querySelectorAll('.content-card').forEach(c => c.classList.remove('active'));
          if (!isActive) card.classList.add('active');
        };

        container.appendChild(card);
      });
    }

    // --- Modal Logic ---
    function openModal(parentId, subId) {
      // Flatten DB search
      const allItems = [...DB.genres, ...DB.instruments, ...DB.classical];
      const parent = allItems.find(x => x.id === parentId);
      if (!parent) return;
      const sub = parent.subs.find(x => x.id === subId);
      if (!sub) return;

      document.getElementById('detail-body').innerHTML = sub.content;

      // Open Modal
      const modal = document.getElementById('detail-modal');
      modal.classList.add('open');
    }

    function closeDetail() {
      const modal = document.getElementById('detail-modal');
      modal.classList.remove('open');
      // Stop videos
      const body = document.getElementById('detail-body');
      const iframe = body.querySelector('iframe');
      if (iframe) iframe.src = iframe.src;
    }

  </script>
</body>

</html>